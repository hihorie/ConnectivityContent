<div class="large-6 large-centered medium-10 medium-centered columns simple-content">
    <h1>EQC Login</h1>
    <p class="announce">
        Please enter your Expedia Quick Connect (EQC) login details below.
    </p>
    <form id="loginform" class="announce" style="margin-bottom: 200px;" onsubmit="login(this); return false;">
        <div id="result" class="formline center"></div>
        <div class="formline"><input class="submit" type="button" value="Check Login" onclick="checklogin()"/></div>
    </form>
</div>
<script src="/js/jwtAuthentication.js"></script>
<!--[if lte IE 9]>
<script src="/js/base64.js"></script>
<!--<![endif]-->
<script>
    //window.location.href = "https://turnstile-web.us-west-2.test.expedia.com/hotel-assignment-service-auth/v1/homepage";
    
    function checklogin() {

        $.ajax({
            method: "GET",
            url: "http://turnstile-web.us-west-2.test.expedia.com/hotel-assignment-service-noauth/v1/checklogin",
            xhrFields: {
                withCredentials: false,
                XDomainRequest: true
            },
            beforeSend: function(xhr) {
                xhr.setRequestHeader("Authorization", "JWT xxx");
            }
        }).done(function(data, textStatus, jqxhr) {
            console.log("Authenticated with turnstile.");
        }).fail(function(jqxhr) {
            alert("Not authenticated with turnstile.");
            window.location.href = "https://turnstile-web.us-west-2.test.expedia.com/hotel-assignment-service-auth/v1/homepage";
        });
    }

</script>